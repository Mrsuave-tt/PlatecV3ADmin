{"ast":null,"code":"import React, { useEffect } from 'react';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { AuthProvider, useAuth } from \"./src/contexts/AuthContext\";\nimport LoginScreen from \"./src/screens/LoginScreen\";\nimport HomeScreen from \"./src/screens/HomeScreen\";\nimport AttendanceScreen from \"./src/screens/AttendanceScreen\";\nimport NotificationsScreen from \"./src/screens/NotificationsScreen\";\nimport { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Stack = createNativeStackNavigator();\nfunction AppNavigator() {\n  var _useAuth = useAuth(),\n    user = _useAuth.user,\n    userData = _useAuth.userData,\n    loading = _useAuth.loading;\n  useEffect(function () {\n    if (userData && userData.role !== 'student') {\n      Alert.alert('Access Restricted', 'This mobile app is for students only. Teachers and admins should use the web portal.', [{\n        text: 'OK'\n      }]);\n    }\n  }, [userData]);\n  if (loading) {\n    return null;\n  }\n  if (user && userData && userData.role !== 'student') {\n    return _jsx(Stack.Navigator, {\n      children: _jsx(Stack.Screen, {\n        name: \"Login\",\n        component: LoginScreen,\n        options: {\n          headerShown: false\n        }\n      })\n    });\n  }\n  return _jsx(Stack.Navigator, {\n    children: !user ? _jsx(Stack.Screen, {\n      name: \"Login\",\n      component: LoginScreen,\n      options: {\n        headerShown: false\n      }\n    }) : _jsxs(_Fragment, {\n      children: [_jsx(Stack.Screen, {\n        name: \"Home\",\n        component: HomeScreen,\n        options: {\n          headerShown: false\n        }\n      }), _jsx(Stack.Screen, {\n        name: \"Attendance\",\n        component: AttendanceScreen,\n        options: {\n          title: 'Attendance History',\n          headerStyle: {\n            backgroundColor: '#667eea'\n          },\n          headerTintColor: '#fff',\n          headerTitleStyle: {\n            fontWeight: 'bold'\n          }\n        }\n      }), _jsx(Stack.Screen, {\n        name: \"Notifications\",\n        component: NotificationsScreen,\n        options: {\n          title: 'Notifications',\n          headerStyle: {\n            backgroundColor: '#667eea'\n          },\n          headerTintColor: '#fff',\n          headerTitleStyle: {\n            fontWeight: 'bold'\n          }\n        }\n      })]\n    })\n  });\n}\nexport default function App() {\n  return _jsx(AuthProvider, {\n    children: _jsx(NavigationContainer, {\n      children: _jsx(AppNavigator, {})\n    })\n  });\n}","map":{"version":3,"names":["React","useEffect","NavigationContainer","createNativeStackNavigator","Alert","AuthProvider","useAuth","LoginScreen","HomeScreen","AttendanceScreen","NotificationsScreen","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Stack","AppNavigator","_useAuth","user","userData","loading","role","alert","text","Navigator","children","Screen","name","component","options","headerShown","title","headerStyle","backgroundColor","headerTintColor","headerTitleStyle","fontWeight","App"],"sources":["C:/Users/Vincent/Desktop/attendance-system/mobile/App.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\nimport { Alert } from 'react-native';\nimport { AuthProvider, useAuth } from './src/contexts/AuthContext';\n\nimport LoginScreen from './src/screens/LoginScreen';\nimport HomeScreen from './src/screens/HomeScreen';\nimport AttendanceScreen from './src/screens/AttendanceScreen';\nimport NotificationsScreen from './src/screens/NotificationsScreen';\n\nconst Stack = createNativeStackNavigator();\n\nfunction AppNavigator() {\n  const { user, userData, loading } = useAuth();\n\n  useEffect(() => {\n    // Check if non-student tries to access mobile app\n    if (userData && userData.role !== 'student') {\n      Alert.alert(\n        'Access Restricted',\n        'This mobile app is for students only. Teachers and admins should use the web portal.',\n        [{ text: 'OK' }]\n      );\n    }\n  }, [userData]);\n\n  if (loading) {\n    return null; // or a loading screen\n  }\n\n  // Block non-students from accessing the app\n  if (user && userData && userData.role !== 'student') {\n    return (\n      <Stack.Navigator>\n        <Stack.Screen \n          name=\"Login\" \n          component={LoginScreen}\n          options={{ headerShown: false }}\n        />\n      </Stack.Navigator>\n    );\n  }\n\n  return (\n    <Stack.Navigator>\n      {!user ? (\n        <Stack.Screen \n          name=\"Login\" \n          component={LoginScreen}\n          options={{ headerShown: false }}\n        />\n      ) : (\n        <>\n          <Stack.Screen \n            name=\"Home\" \n            component={HomeScreen}\n            options={{ headerShown: false }}\n          />\n          <Stack.Screen \n            name=\"Attendance\" \n            component={AttendanceScreen}\n            options={{\n              title: 'Attendance History',\n              headerStyle: { backgroundColor: '#667eea' },\n              headerTintColor: '#fff',\n              headerTitleStyle: { fontWeight: 'bold' },\n            }}\n          />\n          <Stack.Screen \n            name=\"Notifications\" \n            component={NotificationsScreen}\n            options={{\n              title: 'Notifications',\n              headerStyle: { backgroundColor: '#667eea' },\n              headerTintColor: '#fff',\n              headerTitleStyle: { fontWeight: 'bold' },\n            }}\n          />\n        </>\n      )}\n    </Stack.Navigator>\n  );\n}\n\nexport default function App() {\n  return (\n    <AuthProvider>\n      <NavigationContainer>\n        <AppNavigator />\n      </NavigationContainer>\n    </AuthProvider>\n  );\n}\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,mBAAmB,QAAQ,0BAA0B;AAC9D,SAASC,0BAA0B,QAAQ,gCAAgC;AAAC,OAAAC,KAAA;AAE5E,SAASC,YAAY,EAAEC,OAAO;AAE9B,OAAOC,WAAW;AAClB,OAAOC,UAAU;AACjB,OAAOC,gBAAgB;AACvB,OAAOC,mBAAmB;AAA0C,SAAAC,GAAA,IAAAC,IAAA,EAAAC,QAAA,IAAAC,SAAA,EAAAC,IAAA,IAAAC,KAAA;AAEpE,IAAMC,KAAK,GAAGd,0BAA0B,CAAC,CAAC;AAE1C,SAASe,YAAYA,CAAA,EAAG;EACtB,IAAAC,QAAA,GAAoCb,OAAO,CAAC,CAAC;IAArCc,IAAI,GAAAD,QAAA,CAAJC,IAAI;IAAEC,QAAQ,GAAAF,QAAA,CAARE,QAAQ;IAAEC,OAAO,GAAAH,QAAA,CAAPG,OAAO;EAE/BrB,SAAS,CAAC,YAAM;IAEd,IAAIoB,QAAQ,IAAIA,QAAQ,CAACE,IAAI,KAAK,SAAS,EAAE;MAC3CnB,KAAK,CAACoB,KAAK,CACT,mBAAmB,EACnB,sFAAsF,EACtF,CAAC;QAAEC,IAAI,EAAE;MAAK,CAAC,CACjB,CAAC;IACH;EACF,CAAC,EAAE,CAACJ,QAAQ,CAAC,CAAC;EAEd,IAAIC,OAAO,EAAE;IACX,OAAO,IAAI;EACb;EAGA,IAAIF,IAAI,IAAIC,QAAQ,IAAIA,QAAQ,CAACE,IAAI,KAAK,SAAS,EAAE;IACnD,OACEX,IAAA,CAACK,KAAK,CAACS,SAAS;MAAAC,QAAA,EACdf,IAAA,CAACK,KAAK,CAACW,MAAM;QACXC,IAAI,EAAC,OAAO;QACZC,SAAS,EAAEvB,WAAY;QACvBwB,OAAO,EAAE;UAAEC,WAAW,EAAE;QAAM;MAAE,CACjC;IAAC,CACa,CAAC;EAEtB;EAEA,OACEpB,IAAA,CAACK,KAAK,CAACS,SAAS;IAAAC,QAAA,EACb,CAACP,IAAI,GACJR,IAAA,CAACK,KAAK,CAACW,MAAM;MACXC,IAAI,EAAC,OAAO;MACZC,SAAS,EAAEvB,WAAY;MACvBwB,OAAO,EAAE;QAAEC,WAAW,EAAE;MAAM;IAAE,CACjC,CAAC,GAEFhB,KAAA,CAAAF,SAAA;MAAAa,QAAA,GACEf,IAAA,CAACK,KAAK,CAACW,MAAM;QACXC,IAAI,EAAC,MAAM;QACXC,SAAS,EAAEtB,UAAW;QACtBuB,OAAO,EAAE;UAAEC,WAAW,EAAE;QAAM;MAAE,CACjC,CAAC,EACFpB,IAAA,CAACK,KAAK,CAACW,MAAM;QACXC,IAAI,EAAC,YAAY;QACjBC,SAAS,EAAErB,gBAAiB;QAC5BsB,OAAO,EAAE;UACPE,KAAK,EAAE,oBAAoB;UAC3BC,WAAW,EAAE;YAAEC,eAAe,EAAE;UAAU,CAAC;UAC3CC,eAAe,EAAE,MAAM;UACvBC,gBAAgB,EAAE;YAAEC,UAAU,EAAE;UAAO;QACzC;MAAE,CACH,CAAC,EACF1B,IAAA,CAACK,KAAK,CAACW,MAAM;QACXC,IAAI,EAAC,eAAe;QACpBC,SAAS,EAAEpB,mBAAoB;QAC/BqB,OAAO,EAAE;UACPE,KAAK,EAAE,eAAe;UACtBC,WAAW,EAAE;YAAEC,eAAe,EAAE;UAAU,CAAC;UAC3CC,eAAe,EAAE,MAAM;UACvBC,gBAAgB,EAAE;YAAEC,UAAU,EAAE;UAAO;QACzC;MAAE,CACH,CAAC;IAAA,CACF;EACH,CACc,CAAC;AAEtB;AAEA,eAAe,SAASC,GAAGA,CAAA,EAAG;EAC5B,OACE3B,IAAA,CAACP,YAAY;IAAAsB,QAAA,EACXf,IAAA,CAACV,mBAAmB;MAAAyB,QAAA,EAClBf,IAAA,CAACM,YAAY,IAAE;IAAC,CACG;EAAC,CACV,CAAC;AAEnB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}