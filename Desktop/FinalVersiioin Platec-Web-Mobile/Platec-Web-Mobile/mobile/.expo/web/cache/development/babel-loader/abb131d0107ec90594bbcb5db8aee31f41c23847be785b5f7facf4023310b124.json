{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { onAuthStateChangedListener, getUserData } from \"../services/firebase\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar AuthContext = createContext();\nexport var useAuth = function useAuth() {\n  var context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within AuthProvider');\n  }\n  return context;\n};\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUser = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    userData = _useState4[0],\n    setUserData = _useState4[1];\n  var _useState5 = useState(true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  useEffect(function () {\n    var unsubscribe = onAuthStateChangedListener(function () {\n      var _ref2 = _asyncToGenerator(function* (firebaseUser) {\n        if (firebaseUser) {\n          setUser(firebaseUser);\n          var result = yield getUserData(firebaseUser.uid);\n          if (result.success) {\n            setUserData(result.data);\n          } else {\n            console.error('Error fetching user data:', result.error);\n            setUserData(null);\n          }\n        } else {\n          setUser(null);\n          setUserData(null);\n        }\n        setLoading(false);\n      });\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n    return function () {\n      return unsubscribe();\n    };\n  }, []);\n  var value = {\n    user: user,\n    userData: userData,\n    loading: loading\n  };\n  return _jsx(AuthContext.Provider, {\n    value: value,\n    children: children\n  });\n};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","onAuthStateChangedListener","getUserData","jsx","_jsx","AuthContext","useAuth","context","Error","AuthProvider","_ref","children","_useState","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","userData","setUserData","_useState5","_useState6","loading","setLoading","unsubscribe","_ref2","_asyncToGenerator","firebaseUser","result","uid","success","data","console","error","_x","apply","arguments","value","Provider"],"sources":["C:/Users/Vincent/Desktop/attendance-system/mobile/src/contexts/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { onAuthStateChangedListener, getUserData } from '../services/firebase';\n\nconst AuthContext = createContext();\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within AuthProvider');\n  }\n  return context;\n};\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [userData, setUserData] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChangedListener(async (firebaseUser) => {\n      if (firebaseUser) {\n        setUser(firebaseUser);\n        \n        // Fetch user data from Firestore\n        const result = await getUserData(firebaseUser.uid);\n        if (result.success) {\n          setUserData(result.data);\n        } else {\n          console.error('Error fetching user data:', result.error);\n          setUserData(null);\n        }\n      } else {\n        setUser(null);\n        setUserData(null);\n      }\n      setLoading(false);\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  const value = {\n    user,\n    userData,\n    loading\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC7E,SAASC,0BAA0B,EAAEC,WAAW;AAA+B,SAAAC,GAAA,IAAAC,IAAA;AAE/E,IAAMC,WAAW,GAAGR,aAAa,CAAC,CAAC;AAEnC,OAAO,IAAMS,OAAO,GAAG,SAAVA,OAAOA,CAAA,EAAS;EAC3B,IAAMC,OAAO,GAAGT,UAAU,CAACO,WAAW,CAAC;EACvC,IAAI,CAACE,OAAO,EAAE;IACZ,MAAM,IAAIC,KAAK,CAAC,0CAA0C,CAAC;EAC7D;EACA,OAAOD,OAAO;AAChB,CAAC;AAED,OAAO,IAAME,YAAY,GAAG,SAAfA,YAAYA,CAAAC,IAAA,EAAqB;EAAA,IAAfC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;EACrC,IAAAC,SAAA,GAAwBb,QAAQ,CAAC,IAAI,CAAC;IAAAc,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA/BG,IAAI,GAAAF,UAAA;IAAEG,OAAO,GAAAH,UAAA;EACpB,IAAAI,UAAA,GAAgClB,QAAQ,CAAC,IAAI,CAAC;IAAAmB,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAAvCE,QAAQ,GAAAD,UAAA;IAAEE,WAAW,GAAAF,UAAA;EAC5B,IAAAG,UAAA,GAA8BtB,QAAQ,CAAC,IAAI,CAAC;IAAAuB,UAAA,GAAAR,cAAA,CAAAO,UAAA;IAArCE,OAAO,GAAAD,UAAA;IAAEE,UAAU,GAAAF,UAAA;EAE1BtB,SAAS,CAAC,YAAM;IACd,IAAMyB,WAAW,GAAGxB,0BAA0B;MAAA,IAAAyB,KAAA,GAAAC,iBAAA,CAAC,WAAOC,YAAY,EAAK;QACrE,IAAIA,YAAY,EAAE;UAChBZ,OAAO,CAACY,YAAY,CAAC;UAGrB,IAAMC,MAAM,SAAS3B,WAAW,CAAC0B,YAAY,CAACE,GAAG,CAAC;UAClD,IAAID,MAAM,CAACE,OAAO,EAAE;YAClBX,WAAW,CAACS,MAAM,CAACG,IAAI,CAAC;UAC1B,CAAC,MAAM;YACLC,OAAO,CAACC,KAAK,CAAC,2BAA2B,EAAEL,MAAM,CAACK,KAAK,CAAC;YACxDd,WAAW,CAAC,IAAI,CAAC;UACnB;QACF,CAAC,MAAM;UACLJ,OAAO,CAAC,IAAI,CAAC;UACbI,WAAW,CAAC,IAAI,CAAC;QACnB;QACAI,UAAU,CAAC,KAAK,CAAC;MACnB,CAAC;MAAA,iBAAAW,EAAA;QAAA,OAAAT,KAAA,CAAAU,KAAA,OAAAC,SAAA;MAAA;IAAA,IAAC;IAEF,OAAO;MAAA,OAAMZ,WAAW,CAAC,CAAC;IAAA;EAC5B,CAAC,EAAE,EAAE,CAAC;EAEN,IAAMa,KAAK,GAAG;IACZvB,IAAI,EAAJA,IAAI;IACJI,QAAQ,EAARA,QAAQ;IACRI,OAAO,EAAPA;EACF,CAAC;EAED,OAAOnB,IAAA,CAACC,WAAW,CAACkC,QAAQ;IAACD,KAAK,EAAEA,KAAM;IAAA3B,QAAA,EAAEA;EAAQ,CAAuB,CAAC;AAC9E,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}