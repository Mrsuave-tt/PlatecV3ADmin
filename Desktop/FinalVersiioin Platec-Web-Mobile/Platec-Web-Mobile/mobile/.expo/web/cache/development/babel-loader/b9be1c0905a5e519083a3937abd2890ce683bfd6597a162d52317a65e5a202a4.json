{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Vincent\\\\Desktop\\\\attendance-system\\\\mobile\\\\src\\\\contexts\\\\AuthContext.js\";\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { onAuthStateChangedListener, getUserData } from '../services/firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = createContext();\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within AuthProvider');\n  }\n  return context;\n};\nexport const AuthProvider = ({\n  children\n}) => {\n  const [user, setUser] = useState(null);\n  const [userData, setUserData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const unsubscribe = onAuthStateChangedListener(async firebaseUser => {\n      if (firebaseUser) {\n        setUser(firebaseUser);\n        const result = await getUserData(firebaseUser.uid);\n        if (result.success) {\n          setUserData(result.data);\n        } else {\n          console.error('Error fetching user data:', result.error);\n          setUserData(null);\n        }\n      } else {\n        setUser(null);\n        setUserData(null);\n      }\n      setLoading(false);\n    });\n    return () => unsubscribe();\n  }, []);\n  const value = {\n    user,\n    userData,\n    loading\n  };\n  return _jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 10\n  }, this);\n};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","onAuthStateChangedListener","getUserData","jsxDEV","_jsxDEV","AuthContext","useAuth","context","Error","AuthProvider","children","user","setUser","userData","setUserData","loading","setLoading","unsubscribe","firebaseUser","result","uid","success","data","console","error","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["C:/Users/Vincent/Desktop/attendance-system/mobile/src/contexts/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { onAuthStateChangedListener, getUserData } from '../services/firebase';\n\nconst AuthContext = createContext();\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within AuthProvider');\n  }\n  return context;\n};\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [userData, setUserData] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChangedListener(async (firebaseUser) => {\n      if (firebaseUser) {\n        setUser(firebaseUser);\n        \n        // Fetch user data from Firestore\n        const result = await getUserData(firebaseUser.uid);\n        if (result.success) {\n          setUserData(result.data);\n        } else {\n          console.error('Error fetching user data:', result.error);\n          setUserData(null);\n        }\n      } else {\n        setUser(null);\n        setUserData(null);\n      }\n      setLoading(false);\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  const value = {\n    user,\n    userData,\n    loading\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC7E,SAASC,0BAA0B,EAAEC,WAAW,QAAQ,sBAAsB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/E,MAAMC,WAAW,GAAGR,aAAa,CAAC,CAAC;AAEnC,OAAO,MAAMS,OAAO,GAAGA,CAAA,KAAM;EAC3B,MAAMC,OAAO,GAAGT,UAAU,CAACO,WAAW,CAAC;EACvC,IAAI,CAACE,OAAO,EAAE;IACZ,MAAM,IAAIC,KAAK,CAAC,0CAA0C,CAAC;EAC7D;EACA,OAAOD,OAAO;AAChB,CAAC;AAED,OAAO,MAAME,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAC5C,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACc,QAAQ,EAAEC,WAAW,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACgB,OAAO,EAAEC,UAAU,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EAE5CC,SAAS,CAAC,MAAM;IACd,MAAMiB,WAAW,GAAGhB,0BAA0B,CAAC,MAAOiB,YAAY,IAAK;MACrE,IAAIA,YAAY,EAAE;QAChBN,OAAO,CAACM,YAAY,CAAC;QAGrB,MAAMC,MAAM,GAAG,MAAMjB,WAAW,CAACgB,YAAY,CAACE,GAAG,CAAC;QAClD,IAAID,MAAM,CAACE,OAAO,EAAE;UAClBP,WAAW,CAACK,MAAM,CAACG,IAAI,CAAC;QAC1B,CAAC,MAAM;UACLC,OAAO,CAACC,KAAK,CAAC,2BAA2B,EAAEL,MAAM,CAACK,KAAK,CAAC;UACxDV,WAAW,CAAC,IAAI,CAAC;QACnB;MACF,CAAC,MAAM;QACLF,OAAO,CAAC,IAAI,CAAC;QACbE,WAAW,CAAC,IAAI,CAAC;MACnB;MACAE,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC,CAAC;IAEF,OAAO,MAAMC,WAAW,CAAC,CAAC;EAC5B,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMQ,KAAK,GAAG;IACZd,IAAI;IACJE,QAAQ;IACRE;EACF,CAAC;EAED,OAAOX,OAAA,CAACC,WAAW,CAACqB,QAAQ;IAACD,KAAK,EAAEA,KAAM;IAAAf,QAAA,EAAEA;EAAQ;IAAAiB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAuB,CAAC;AAC9E,CAAC","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}