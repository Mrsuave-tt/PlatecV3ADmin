{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged } from 'firebase/auth';\nimport { getFirestore, collection, doc, getDoc, query, where, orderBy, getDocs, updateDoc, onSnapshot } from 'firebase/firestore';\nimport firebaseConfig from \"../config/firebaseConfig\";\nvar app = initializeApp(firebaseConfig);\nexport var auth = getAuth(app);\nexport var db = getFirestore(app);\nexport var loginUser = function () {\n  var _ref = _asyncToGenerator(function* (email, password) {\n    try {\n      var userCredential = yield signInWithEmailAndPassword(auth, email, password);\n      return {\n        success: true,\n        user: userCredential.user\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  });\n  return function loginUser(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var logoutUser = function () {\n  var _ref2 = _asyncToGenerator(function* () {\n    try {\n      yield signOut(auth);\n      return {\n        success: true\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  });\n  return function logoutUser() {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var onAuthStateChangedListener = function onAuthStateChangedListener(callback) {\n  return onAuthStateChanged(auth, callback);\n};\nexport var getUserData = function () {\n  var _ref3 = _asyncToGenerator(function* (userId) {\n    try {\n      var docRef = doc(db, 'users', userId);\n      var docSnap = yield getDoc(docRef);\n      if (docSnap.exists()) {\n        return {\n          success: true,\n          data: docSnap.data()\n        };\n      } else {\n        return {\n          success: false,\n          error: 'User not found'\n        };\n      }\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  });\n  return function getUserData(_x3) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var getStudentAttendance = function () {\n  var _ref4 = _asyncToGenerator(function* (studentId) {\n    var startDate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var endDate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    try {\n      var q = query(collection(db, 'attendance'), where('studentId', '==', studentId), orderBy('date', 'desc'));\n      if (startDate) {\n        q = query(q, where('date', '>=', startDate));\n      }\n      if (endDate) {\n        q = query(q, where('date', '<=', endDate));\n      }\n      var querySnapshot = yield getDocs(q);\n      var attendance = [];\n      querySnapshot.forEach(function (doc) {\n        attendance.push(_objectSpread({\n          id: doc.id\n        }, doc.data()));\n      });\n      return {\n        success: true,\n        data: attendance\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  });\n  return function getStudentAttendance(_x4) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nexport var getStudentNotifications = function () {\n  var _ref5 = _asyncToGenerator(function* (studentId) {\n    try {\n      var q = query(collection(db, 'notifications'), where('studentId', '==', studentId), orderBy('date', 'desc'));\n      var querySnapshot = yield getDocs(q);\n      var notifications = [];\n      querySnapshot.forEach(function (doc) {\n        notifications.push(_objectSpread({\n          id: doc.id\n        }, doc.data()));\n      });\n      return {\n        success: true,\n        data: notifications\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  });\n  return function getStudentNotifications(_x5) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nexport var markNotificationAsRead = function () {\n  var _ref6 = _asyncToGenerator(function* (notificationId) {\n    try {\n      yield updateDoc(doc(db, 'notifications', notificationId), {\n        read: true\n      });\n      return {\n        success: true\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  });\n  return function markNotificationAsRead(_x6) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nexport var getAttendanceStats = function getAttendanceStats(attendanceRecords) {\n  var total = attendanceRecords.length;\n  var present = attendanceRecords.filter(function (a) {\n    return a.status === 'present';\n  }).length;\n  var absent = attendanceRecords.filter(function (a) {\n    return a.status === 'absent';\n  }).length;\n  var late = attendanceRecords.filter(function (a) {\n    return a.status === 'late';\n  }).length;\n  return {\n    total: total,\n    present: present,\n    absent: absent,\n    late: late,\n    presentPercent: total > 0 ? Math.round(present / total * 100) : 0\n  };\n};","map":{"version":3,"names":["initializeApp","getAuth","signInWithEmailAndPassword","signOut","onAuthStateChanged","getFirestore","collection","doc","getDoc","query","where","orderBy","getDocs","updateDoc","onSnapshot","firebaseConfig","app","auth","db","loginUser","_ref","_asyncToGenerator","email","password","userCredential","success","user","error","message","_x","_x2","apply","arguments","logoutUser","_ref2","onAuthStateChangedListener","callback","getUserData","_ref3","userId","docRef","docSnap","exists","data","_x3","getStudentAttendance","_ref4","studentId","startDate","length","undefined","endDate","q","querySnapshot","attendance","forEach","push","_objectSpread","id","_x4","getStudentNotifications","_ref5","notifications","_x5","markNotificationAsRead","_ref6","notificationId","read","_x6","getAttendanceStats","attendanceRecords","total","present","filter","a","status","absent","late","presentPercent","Math","round"],"sources":["C:/Users/Vincent/Desktop/attendance-system/mobile/src/services/firebase.js"],"sourcesContent":["import { initializeApp } from 'firebase/app';\nimport { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged } from 'firebase/auth';\nimport { getFirestore, collection, doc, getDoc, query, where, orderBy, getDocs, updateDoc, onSnapshot } from 'firebase/firestore';\nimport firebaseConfig from '../config/firebaseConfig';\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\n\n// Authentication\nexport const loginUser = async (email, password) => {\n  try {\n    const userCredential = await signInWithEmailAndPassword(auth, email, password);\n    return { success: true, user: userCredential.user };\n  } catch (error) {\n    return { success: false, error: error.message };\n  }\n};\n\nexport const logoutUser = async () => {\n  try {\n    await signOut(auth);\n    return { success: true };\n  } catch (error) {\n    return { success: false, error: error.message };\n  }\n};\n\nexport const onAuthStateChangedListener = (callback) => {\n  return onAuthStateChanged(auth, callback);\n};\n\n// User Data\nexport const getUserData = async (userId) => {\n  try {\n    const docRef = doc(db, 'users', userId);\n    const docSnap = await getDoc(docRef);\n    if (docSnap.exists()) {\n      return { success: true, data: docSnap.data() };\n    } else {\n      return { success: false, error: 'User not found' };\n    }\n  } catch (error) {\n    return { success: false, error: error.message };\n  }\n};\n\n// Attendance\nexport const getStudentAttendance = async (studentId, startDate = null, endDate = null) => {\n  try {\n    let q = query(\n      collection(db, 'attendance'),\n      where('studentId', '==', studentId),\n      orderBy('date', 'desc')\n    );\n    \n    if (startDate) {\n      q = query(q, where('date', '>=', startDate));\n    }\n    if (endDate) {\n      q = query(q, where('date', '<=', endDate));\n    }\n    \n    const querySnapshot = await getDocs(q);\n    const attendance = [];\n    querySnapshot.forEach((doc) => {\n      attendance.push({ id: doc.id, ...doc.data() });\n    });\n    return { success: true, data: attendance };\n  } catch (error) {\n    return { success: false, error: error.message };\n  }\n};\n\n// Notifications\nexport const getStudentNotifications = async (studentId) => {\n  try {\n    const q = query(\n      collection(db, 'notifications'),\n      where('studentId', '==', studentId),\n      orderBy('date', 'desc')\n    );\n    const querySnapshot = await getDocs(q);\n    const notifications = [];\n    querySnapshot.forEach((doc) => {\n      notifications.push({ id: doc.id, ...doc.data() });\n    });\n    return { success: true, data: notifications };\n  } catch (error) {\n    return { success: false, error: error.message };\n  }\n};\n\nexport const markNotificationAsRead = async (notificationId) => {\n  try {\n    await updateDoc(doc(db, 'notifications', notificationId), { read: true });\n    return { success: true };\n  } catch (error) {\n    return { success: false, error: error.message };\n  }\n};\n\n// Get attendance statistics\nexport const getAttendanceStats = (attendanceRecords) => {\n  const total = attendanceRecords.length;\n  const present = attendanceRecords.filter(a => a.status === 'present').length;\n  const absent = attendanceRecords.filter(a => a.status === 'absent').length;\n  const late = attendanceRecords.filter(a => a.status === 'late').length;\n  \n  return {\n    total,\n    present,\n    absent,\n    late,\n    presentPercent: total > 0 ? Math.round((present / total) * 100) : 0\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}